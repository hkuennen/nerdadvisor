<%= render "shared/navbar" %>

<div class="bg-main" style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url(https://t4.ftcdn.net/jpg/04/09/70/87/360_F_409708782_HxuxOH8f7xSmj5p4ygbAbuJE74vGGj2N.jpg); padding-top:150px; min-height: 120vh;">
  <div class="container">
  <h1 class="text-center mb-4">Available Jobs</h1>
    <div class="row">
      <div class="card-product col-4 text-light d-grid" >
        <div class="col">
          <img style="width: 100%" src="https://thumbs.gfycat.com/DopeyLegitimateGaur-max-1mb.gif" />
        </div>
        <div class="col card-product-infos" style="padding: 10px">
          <form action="<%= jobs_path %>" method="GET">
            <fieldset>
            <legend>Results</legend>
              <p class="bg-dark py-2">Found <strong><%= pluralize(@jobs.size, "job") %></strong></p>
            </fieldset>
            <fieldset>
            <hr>
            <legend>Search</legend>
              <div class="form-group d-flex">
                <p>
                  <label for="title" class="form-input-label">Job Title</label>
                  <input type="text" id="title" name="title" <%= "value=#{params[:title].capitalize}" if params[:title].present? %> placeholder="Search for title..." class="form-input bg-secondary justify-content-end">
                </p>
                <p>
                  <label for="location" class="form-input-label">Location</label>
                  <input type="text" id="location" name="city" <%= "value=#{params[:city].capitalize}" if params[:city].present? %> placeholder="Search for city..." class="form-input bg-secondary justify-content-end">
                </p>
              </div>
            </fieldset>
            <fieldset>
            <hr>
            <legend>Job Types</legend>
              <div class="form-check bg-dark pt-1 pb-3">
                <p>
                  <input type="checkbox" id="fulltime" name="ft" value="Fulltime" <%= "checked" if params[:ft] %> class="form-check-input bg-secondary">
                  <label for="fulltime" class="form-check-label">Fulltime</label>
                </p>
                <p>
                  <input type="checkbox" id="parttime" name="pt" value="Parttime" <%= "checked" if params[:pt] %> class="form-check-input bg-secondary">
                  <label for="parttime" class="form-check-label">Parttime</label>
                </p>
                <p>
                  <input type="checkbox" id="freelancer" name="fl" value="Freelancer" <%= "checked" if params[:fl] %> class="form-check-input bg-secondary">
                  <label for="freelancer" class="form-check-label">Freelancer</label>
                </p>
                <p>
                  <input type="checkbox" id="internship" name="is" value="Internship" <%= "checked" if params[:is] %> class="form-check-input bg-secondary">
                  <label for="internship" class="form-check-label">Internship</label>
                </p>
                <p>
                  <input type="checkbox" id="working-student" name="ws" value="Working Student" <%= "checked" if params[:ws] %> class="form-check-input bg-secondary">
                  <label for="working-student" class="form-check-label">Working Student</label>
                </p>
              </div>
            </fieldset>
            <hr>
            <fieldset>
            <legend>Job Category</legend>
              <div class="form-select bg-dark">
                <select id="skills" name="skills" class="form-control bg-secondary">
                  <option>Sound</option>
                  <option>Arts</option>
                  <option>Coding</option>
                  <option>Sales</option>
                  <option>Product</option>
                </select></p>
              </div>
            </fieldset>
            <hr>
            <fieldset>
            <legend>Language</legend>
              <div class="form-select bg-dark">
                <select id="language" name="language" class="form-control bg-secondary">
                  <option>English</option>
                  <option>German</option>
                  <option>Spanish</option>
                </select></p>
              </div>
            </fieldset>
            <hr>
            <fieldset>
              <div class="d-flex justify-content-center">
                <button type="Submit" class="btn btn-dark px-5">Filter</button>
              </div>
            </fieldset>
          </form>
        </div>
      </div>


      <div class="col-8">
      <% @jobs.each do |job| %>
        <div class="box">
          <span></span>
          <div class="content">
            <div class="pb-4">
              <%= cl_image_tag job.employer.image.key, height: "40px" %>
            </div>
            <h5> <%= job.title %> at <%= job.employer.companyName  %> </h5>
            <hr>
            <div id="show-more">
              <p> <%= job.desc %> </p>
            </div>
            <br>
            <div class="d-flex justify-content-between">
              <div style="font-weight: bold;">
                <%= job._type  %>: â‚¬<%=job.salary%>/year
                <img src="https://mario.wiki.gallery/images/9/91/PN_Spinning_Coin.gif" width="20px" />
                <br>
                <%= job.city  %> - Start Date: <%=job.startDate.strftime("%m/%Y")%>
              </div>
              </p>
              <%= link_to "I'm interested", job_path(job), style:"text-decoration:none; color:#f9fafc; font-weight:bold; margin-top:4px", class:"btn col-3 btn-secondary4" %>
            </div>
          </div>
        </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
